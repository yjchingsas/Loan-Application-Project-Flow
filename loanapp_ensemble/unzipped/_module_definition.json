{"scope":"PUBLIC","source":"\n\n  DS2_OPTIONS LOGICALEXPR = STANDARD;\n  DS2_OPTIONS SCOND = WARNING;\n  DS2_OPTIONS MISSING_NOTE;\n\n                                                                                      \n                     \n  package loanapp_ensemble  / inline;\n    dcl package logger logr_perf('App.tk.SID.Perf');\n    dcl double timer_start;\n    dcl double elapsed_time;\n    dcl double total_timer_start;\n    dcl double total_elapsed_time;\n\n    dcl package \"Loanu32Appu32Ensemble_Assignu32Modelu32Used_1_0\" \"Loanu32Appu32Ensemble_Assignu32Modelu32Used_1_0_hdl\"();\n    dcl package \"Loanu32Appu32Ensemble_CreditCheckAPI_1_0\" \"Loanu32Appu32Ensemble_CreditCheckAPI_1_0_hdl\"();\n    dcl package \"Loanu32Appu32Ensemble_Logisticu32Regressionu32u40Pipelineu321u41\" \"Loanu32Appu32Ensemble_Logisticu32Regressionu32u40Pipelineu321u41_hdl\"();\n    dcl package \"Loanu32Appu32Ensemble_Pythonu32GradientBoostingu32u40Pipelineu321u41\" \"Loanu32Appu32Ensemble_Pythonu32GradientBoostingu32u40Pipelineu321u41_hdl\"();\n    dcl package \"Loanu32Appu32Ensemble_highRiskModelScoreRule_1_0\" \"Loanu32Appu32Ensemble_highRiskModelScoreRule_1_0_hdl\"();\n    dcl package \"Loanu32Appu32Ensemble_loanToValueRule_1_0\" \"Loanu32Appu32Ensemble_loanToValueRule_1_0_hdl\"();\n    dcl package \"Loanu32Appu32Ensemble_lowRiskModelScoreRule_1_0\" \"Loanu32Appu32Ensemble_lowRiskModelScoreRule_1_0_hdl\"();\n\n     method init();\n\n     end;\n\n    method execute_internal(\n       in_out double \"CredLineAge\"\n      ,in_out double \"CredLines\"\n      ,in_out varchar \"CustomerID\"\n      ,in_out double \"DebtIncRatio\"\n      ,in_out double \"Delinquencies\"\n      ,in_out double \"DerogatoryMarks\"\n      ,in_out double \"HomeValue\"\n      ,in_out double \"Income\"\n      ,in_out double \"Inquiries\"\n      ,in_out varchar \"JobType\"\n      ,in_out double \"LoanRequest\"\n      ,in_out double \"LoanToValue\"\n      ,in_out double \"YearsOnJob\"\n      ,in_out varchar \"Model_Status\"\n      ,in_out double \"P_Default0\"\n      ,in_out double \"P_Default1\"\n      ,in_out varchar \"Status\"\n\n      ,in_out integer \"_filter_\"\n\n    );\n        dcl integer dg_filter_;\n\n       dcl double \"Default\";\n       dcl varchar(100) \"EM_CLASSIFICATION\";\n       dcl double \"EM_EVENTPROBABILITY\";\n       dcl double \"EM_PROBABILITY\";\n       dcl varchar(100) \"I_Default\";\n\n       dcl integer _masRC;\n\n        total_timer_start = datetime();\n\n\"Model_Status\" = 'undefined';\n\n        timer_start = datetime();\n        \"Loanu32Appu32Ensemble_loanToValueRule_1_0_hdl\".execute(\"CredLineAge\", \"CredLines\", \"CustomerID\", \"DebtIncRatio\", \"Default\", \"Delinquencies\", \"DerogatoryMarks\", \"HomeValue\", \"Income\", \"Inquiries\", \"JobType\", \"LoanRequest\", \"LoanToValue\", \"Status\", \"YearsOnJob\");\n        elapsed_time = datetime() - timer_start;\n        logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: loanToValueRule, Node ID: 0fb4a797-84cf-40d0-bfa8-e7c97693870f, NODE DURATION: ' .. elapsed_time);\n\n        if ( Status='Declined' ) then do;\n\n        end;\n        else do;\n\n             timer_start = datetime();\n             \"Loanu32Appu32Ensemble_CreditCheckAPI_1_0_hdl\".execute(\"CustomerID\", \"CredLineAge\", \"CredLines\", \"DebtIncRatio\", \"Delinquencies\", \"DerogatoryMarks\", \"Inquiries\");\n             elapsed_time = datetime() - timer_start;\n             logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: CreditCheckAPI, Node ID: 1f6821a6-42dc-4e18-84de-630d19e0ff31, NODE DURATION: ' .. elapsed_time);\n\n             timer_start = datetime();\n             \"Loanu32Appu32Ensemble_Assignu32Modelu32Used_1_0_hdl\".execute(\"Delinquencies\", \"Model_Status\");\n             elapsed_time = datetime() - timer_start;\n             logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: Assign Model Used, Node ID: fd81e30f-57d9-4a7e-9304-0dd332917eb4, NODE DURATION: ' .. elapsed_time);\n\n                                  \n             if ( \"Model_Status\" eq 'SAS Model' )\n              then do;\n\n                  timer_start = datetime();\n                  \"Loanu32Appu32Ensemble_Logisticu32Regressionu32u40Pipelineu321u41_hdl\".score(\"Delinquencies\", \"EM_CLASSIFICATION\", \"EM_EVENTPROBABILITY\", \"EM_PROBABILITY\", \"I_Default\", \"P_Default0\", \"P_Default1\");\n                  elapsed_time = datetime() - timer_start;\n                  logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: Logistic Regression (Pipeline 1), Node ID: d5ca6ec3-6e98-404f-b42b-73a5f3ea827f, NODE DURATION: ' .. elapsed_time);\n\n              ;\n\n                  if ( YearsOnJob \u003c 1 ) then do;\n\n                       timer_start = datetime();\n                       \"Loanu32Appu32Ensemble_highRiskModelScoreRule_1_0_hdl\".execute(\"P_Default1\", \"Status\");\n                       elapsed_time = datetime() - timer_start;\n                       logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: highRiskModelScoreRule, Node ID: 7bfecc2b-5726-4e9f-800a-3184a86df07b, NODE DURATION: ' .. elapsed_time);\n\n                  end;\n                  else do;\n\n                       timer_start = datetime();\n                       \"Loanu32Appu32Ensemble_lowRiskModelScoreRule_1_0_hdl\".execute(\"P_Default1\", \"Status\");\n                       elapsed_time = datetime() - timer_start;\n                       logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: lowRiskModelScoreRule, Node ID: 319012a3-e2ce-4944-b85d-bab02fff3e97, NODE DURATION: ' .. elapsed_time);\n\n                  end;\n\n             end;\n             else if ( \"Model_Status\" eq 'Python Model' )\n              then do;\n\n                       timer_start = datetime();\n                       \"Loanu32Appu32Ensemble_Pythonu32GradientBoostingu32u40Pipelineu321u41_hdl\".score(\"CredLineAge\", \"CredLines\", \"DebtIncRatio\", \"Delinquencies\", \"DerogatoryMarks\", \"HomeValue\", \"Income\", \"Inquiries\", \"JobType\", \"LoanRequest\", \"LoanToValue\", \"YearsOnJob\", \"resultCode\", \"P_Default0\", \"P_Default1\", \"I_Default\");\n                       elapsed_time = datetime() - timer_start;\n                       logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: Python GradientBoosting (Pipeline 1), Node ID: 88eb16e2-a3ec-4db6-87a6-13d2d6880a99, NODE DURATION: ' .. elapsed_time);\n\n              ;\n\n                       if ( YearsOnJob \u003c 1 ) then do;\n\n                            timer_start = datetime();\n                            \"Loanu32Appu32Ensemble_highRiskModelScoreRule_1_0_hdl\".execute(\"P_Default1\", \"Status\");\n                            elapsed_time = datetime() - timer_start;\n                            logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: highRiskModelScoreRule, Node ID: 191e61a8-c60d-4684-a935-e9e44ddb2c96, NODE DURATION: ' .. elapsed_time);\n\n                       end;\n                       else do;\n\n                            timer_start = datetime();\n                            \"Loanu32Appu32Ensemble_lowRiskModelScoreRule_1_0_hdl\".execute(\"P_Default1\", \"Status\");\n                            elapsed_time = datetime() - timer_start;\n                            logr_perf.log( 'd', 'Package Name: loanapp_ensemble, Node Name: lowRiskModelScoreRule, Node ID: e84c1f44-c1a0-41bb-b56d-d554d21cb8e5, NODE DURATION: ' .. elapsed_time);\n\n                       end;\n\n             end;\n\n             else do;\n\n             end;\n\n                                \n        end;\n\n        \"end\":                                            \n\n        total_elapsed_time = datetime() - total_timer_start;\n        logr_perf.log( 'd', 'Package Name: loanapp_ensemble, TOTAL DURATION: ' .. total_elapsed_time);\n\n     end;\n\n    method execute(\n       double \"CredLineAge_\"\n      ,double \"CredLines_\"\n      ,varchar(10) \"CustomerID_\"\n      ,double \"DebtIncRatio_\"\n      ,double \"Delinquencies_\"\n      ,double \"DerogatoryMarks_\"\n      ,double \"HomeValue_\"\n      ,double \"Income_\"\n      ,double \"Inquiries_\"\n      ,varchar(7) \"JobType_\"\n      ,double \"LoanRequest_\"\n      ,double \"LoanToValue_\"\n      ,double \"YearsOnJob_\"\n      ,in_out double \"CredLineAge\"\n      ,in_out double \"CredLines\"\n      ,in_out varchar \"CustomerID\"\n      ,in_out double \"DebtIncRatio\"\n      ,in_out double \"Delinquencies\"\n      ,in_out double \"DerogatoryMarks\"\n      ,in_out double \"HomeValue\"\n      ,in_out double \"Income\"\n      ,in_out double \"Inquiries\"\n      ,in_out varchar \"JobType\"\n      ,in_out double \"LoanRequest\"\n      ,in_out double \"LoanToValue\"\n      ,in_out varchar \"Model_Status\"\n      ,in_out double \"P_Default0\"\n      ,in_out double \"P_Default1\"\n      ,in_out varchar \"Status\"\n      ,in_out double \"YearsOnJob\"\n);\n\n      dcl integer _filter_;\n\n          \"CredLineAge\" = \"CredLineAge_\";\n      \"CredLines\" = \"CredLines_\";\n      \"CustomerID\" = \"CustomerID_\";\n      \"DebtIncRatio\" = \"DebtIncRatio_\";\n      \"Delinquencies\" = \"Delinquencies_\";\n      \"DerogatoryMarks\" = \"DerogatoryMarks_\";\n      \"HomeValue\" = \"HomeValue_\";\n      \"Income\" = \"Income_\";\n      \"Inquiries\" = \"Inquiries_\";\n      \"JobType\" = \"JobType_\";\n      \"LoanRequest\" = \"LoanRequest_\";\n      \"LoanToValue\" = \"LoanToValue_\";\n      \"YearsOnJob\" = \"YearsOnJob_\";\n\n          execute_internal(\n          \"CredLineAge\"\n         ,\"CredLines\"\n         ,\"CustomerID\"\n         ,\"DebtIncRatio\"\n         ,\"Delinquencies\"\n         ,\"DerogatoryMarks\"\n         ,\"HomeValue\"\n         ,\"Income\"\n         ,\"Inquiries\"\n         ,\"JobType\"\n         ,\"LoanRequest\"\n         ,\"LoanToValue\"\n         ,\"YearsOnJob\"\n         ,\"Model_Status\"\n         ,\"P_Default0\"\n         ,\"P_Default1\"\n         ,\"Status\"\n      ,\"_filter_\"\n      );\n\n    end;\n\n                       \n       endpackage;","properties":[{"name":"sourceURI","value":"/decisions/flows/01127f95-a0fc-4922-b117-c9aeb02bddd3/revisions/030ecd49-8538-43da-bfc4-14c8c582c22c"}],"submodules":[{"name":"Loanu32Appu32Ensemble_Assignu32Modelu32Used_1_0","description":"","source":"\n\nds2_options scond=WARNING;\n                                                                                      \n\nDS2_OPTIONS LOGICALEXPR = STANDARD;\nDS2_OPTIONS SCOND = WARNING;\n\n                                                                                                                                                                                                                                                                                                              \n  package \"Loanu32Appu32Ensemble_Assignu32Modelu32Used_1_0\"  / inline;\n\n      dcl package logger _logger('App.SASDCM');\n      dcl package logger logr_variableTrace('App.TableServices.DS2.Runtime.TraceVariables');\n\n                                                 \n            method setruleFiredBasePosition(integer newBasePosition); end;\n            method setDecisionNodeID(varchar newDecisonNodeID); end;\n            method enableRuleFiredRecording(); end;\n            method disableRuleFiredRecording(); end;\n            method initRuleFireHashes(); end;\n            method getRuleFiredFlagCount() returns integer;  return 0; end;\n            method recordRuleFired(\n              in_out char    ruleFiredFlags,\n              in_out integer rulesFiredForRecordCount,\n              char(36)       this_rule_id);\n            end;\n\n    method execute( in_out double \"Delinquencies\",in_out varchar \"Model_Status\");\n\n;\n         if (\"Delinquencies\" \u003c 1.0) then do;\n         \"Model_Status\" = 'SAS Model';\n\ngoto \"end_e89fac83-a42f-41f5-b98a-30a16b071792\";end;\n         else do;\n         \"Model_Status\" = 'Python Model';\n\n         end;\n\n         \"end_e89fac83-a42f-41f5-b98a-30a16b071792\":\n\n      rule_end:                                    \n    end;\n\n                                                                    \n   endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"Loanu32Appu32Ensemble_CreditCheckAPI_1_0","description":"","source":"\nds2_options scond=WARNING;\n                                                                             \nds2_options sas;\n                                                                                                                                                                                                                                                                                                 \npackage \"Loanu32Appu32Ensemble_CreditCheckAPI_1_0\" / inline;\n    dcl package pymas py;\n    dcl double pystop;\n    dcl package logger logr('App.tk.SID.Python');\n\n    method execute(\n         varchar(10) CustomerID\n        , in_out double CredLineAge\n        , in_out double CredLines\n        , in_out double DebtIncRatio\n        , in_out double Delinquencies\n        , in_out double DerogatoryMarks\n        , in_out double Inquiries\n    );\n\n      dcl nvarchar(10485760) pypgm;\n      dcl double rc;\n      dcl double revision;\n      if null(py) and pystop ^= 1 then do;\n        py = _new_ pymas();\n        if inmas() then do;\n            rc = py.useModule('\"Loanu32Appu32Ensemble_CreditCheckAPI_1_0_-1069893340\"', 1);\n        end;\n        else do;\n            rc = 1;\n        end;\n        if rc then do;\n          rc = py.appendSrcLine('');\n          rc = py.appendSrcLine(''''''' List all output parameters as comma-separated values in the \"Output:\" docString. Do not specify \"None\" if there is no output parameter.'''''' ');\n          rc = py.appendSrcLine('import json ');\n          rc = py.appendSrcLine('import requests ');\n          rc = py.appendSrcLine(' ');\n          rc = py.appendSrcLine('def execute (CustomerID):');\n          rc = py.appendSrcLine('    ''Output:CredLineAge,CredLines,DebtIncRatio,Delinquencies,DerogatoryMarks,Inquiries'' ');\n          rc = py.appendSrcLine('    ');\n          rc = py.appendSrcLine('    ## (CustomerID: str) -\u003e tuple');\n          rc = py.appendSrcLine('    CredLineAge: int');\n          rc = py.appendSrcLine('    CredLines: int');\n          rc = py.appendSrcLine('    DebtIncRatio: int');\n          rc = py.appendSrcLine('    Delinquencies: int');\n          rc = py.appendSrcLine('    DerogatoryMarks: int');\n          rc = py.appendSrcLine('    Inquiries: int');\n          rc = py.appendSrcLine('    ');\n          rc = py.appendSrcLine('    ## Create JSON payload with customer ID');\n          rc = py.appendSrcLine('    payload = { \"CustomerID\": CustomerID} ');\n          rc = py.appendSrcLine('    ## Perform call to external credit bureau API');\n          rc = py.appendSrcLine('    cred_check = requests.post( ');\n          rc = py.appendSrcLine('        url=''http://api.app.svc.cluster.local:5005/check'', ');\n          rc = py.appendSrcLine('        headers={''Content-Type'': ''application/json''}, ');\n          rc = py.appendSrcLine('        data = json.dumps(payload) ');\n          rc = py.appendSrcLine('    ) ');\n          rc = py.appendSrcLine('    CredLines = cred_check.json()[''CredLines''] ');\n          rc = py.appendSrcLine('    CredLineAge = cred_check.json()[''CredLineAge'']');\n          rc = py.appendSrcLine('    DebtIncRatio = cred_check.json()[''DebtIncRatio'']');\n          rc = py.appendSrcLine('    Delinquencies = cred_check.json()[''Delinquencies'']');\n          rc = py.appendSrcLine('    DerogatoryMarks = cred_check.json()[''DerogatoryMarks'']');\n          rc = py.appendSrcLine('    Inquiries = cred_check.json()[''Inquiries'']');\n          rc = py.appendSrcLine('    return CredLineAge,CredLines,DebtIncRatio,Delinquencies,DerogatoryMarks,Inquiries');\n          pypgm = py.getSource();\n          revision = py.publish(pypgm, '\"Loanu32Appu32Ensemble_CreditCheckAPI_1_0_-1069893340\"');\n          if revision \u003c 1 then do;\n            pystop = 1;\n            logr.log( 'e', 'publish revision=$s', revision );\n            return;\n          end;\n        end;\n        else do;\n          logr.log( 'd', 'useModule rc=$s', rc );\n        end;\n        rc = py.useMethod('execute');\n        if rc then do;\n          pystop = 1;\n          logr.log( 'e', 'useMethod rc=$s', rc );\n          return;\n        end;\n      end;\n      if pystop ^= 1 then do;\n        rc = py.setString ('CustomerID', CustomerID);\n        if rc then do;\n          logr.log( 'e', 'set CustomerID rc=$s', rc );\n          return;\n        end;\n        rc = py.execute();\n        if rc then do;\n           logr.log( 'd', 'execute rc=$s', rc );\n           return;\n        end;\n        CredLineAge = py.getDouble('CredLineAge');\n        CredLines = py.getDouble('CredLines');\n        DebtIncRatio = py.getDouble('DebtIncRatio');\n        Delinquencies = py.getDouble('Delinquencies');\n        DerogatoryMarks = py.getDouble('DerogatoryMarks');\n        Inquiries = py.getDouble('Inquiries');\n      end;\n    end;\n                                                             \n endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"Loanu32Appu32Ensemble_Logisticu32Regressionu32u40Pipelineu321u41","description":"","source":"\nds2_options scond=none;\n                                                                                                   \n                                                                                                                                                                                                                                                                                               \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \n                                                                                      \npackage \"Loanu32Appu32Ensemble_Logisticu32Regressionu32u40Pipelineu321u41\" / overwrite=yes;\n   dcl double \"Delinquencies\";\n   dcl double \"P_Default0\" having label n'Predicted: Default=0';\n   dcl double \"P_Default1\" having label n'Predicted: Default=1';\n   dcl nchar(12) \"I_Default\" having label n'Into: Default';\n   dcl double \"EM_EVENTPROBABILITY\";\n   dcl nchar(12) \"EM_CLASSIFICATION\";\n   dcl double \"EM_PROBABILITY\";\n   varlist allvars [_all_];\n\n   method _BXYN6YT3CYU4CE4WA5GTNNZ1Y();\n      dcl double _P_;\n      dcl double MACLOGBIG;\n      dcl double _J_;\n      dcl double _I_;\n      dcl double _TEMP_;\n      dcl double _LINP_;\n      dcl double _BADVAL_;\n      dcl nchar(2) _DELINQUENCIES_;\n      dcl nchar(12) _LEVELS_66456013_[2];\n      dcl double _BETA_66456013_0_[11];\n      dcl double _XROW_66456013_0_[11];\n\n      _LEVELS_66456013_:=('1', '0');\n      _BETA_66456013_0_:=(10.9023671851812, -13.600069917758, -13.0424333486775,\n      -12.0810221815229, -13.3301154211293, -12.1551301536766, -10.055069324794,\n      -4.1095457568212E-9, -4.268191757943E-9, 0, 0);\n      _BADVAL_ = 0.0;\n      _LINP_ = 0.0;\n      _TEMP_ = 0.0;\n      _I_ = 0.0;\n      _J_ = 0.0;\n      MACLOGBIG = 7.0978271289338392E+02;\n      _DELINQUENCIES_ = LEFT(TRIM(put(DELINQUENCIES, BEST2.)));\n      do _I_ = 1.0 to 11.0;\n      _XROW_66456013_0_[_I_] = 0.0;\n      end;\n      _XROW_66456013_0_[1.0] = 1.0;\n      _TEMP_ = 1.0;\n      select (_DELINQUENCIES_);\n      when ('0') _XROW_66456013_0_[2.0] = _TEMP_;\n      when ('1') _XROW_66456013_0_[3.0] = _TEMP_;\n      when ('2') _XROW_66456013_0_[4.0] = _TEMP_;\n      when ('3') _XROW_66456013_0_[5.0] = _TEMP_;\n      when ('4') _XROW_66456013_0_[6.0] = _TEMP_;\n      when ('5') _XROW_66456013_0_[7.0] = _TEMP_;\n      when ('6') _XROW_66456013_0_[8.0] = _TEMP_;\n      when ('7') _XROW_66456013_0_[9.0] = _TEMP_;\n      when ('8') _XROW_66456013_0_[10.0] = _TEMP_;\n      when ('10') _XROW_66456013_0_[11.0] = _TEMP_;\n      otherwise do ;\n      _BADVAL_ = 1.0;\n      goto SKIP_66456013_0;\n      end;\n      end;\n      do _I_ = 1.0 to 11.0;\n      _LINP_ + _XROW_66456013_0_[_I_] * _BETA_66456013_0_[_I_];\n      end;\n      SKIP_66456013_0: if (_BADVAL_ = 0.0) \u0026 ^MISSING(_LINP_) then do ;\n      if (_LINP_ \u003e 0.0) then do ;\n      P_DEFAULT1 = 1.0 / (1.0 + EXP(-_LINP_));\n      end;\n      else do ;\n      P_DEFAULT1 = EXP(_LINP_) / (1.0 + EXP(_LINP_));\n      end;\n      P_DEFAULT0 = 1.0 - P_DEFAULT1;\n      if P_DEFAULT1 \u003e= 0.5 then do ;\n      I_DEFAULT = _LEVELS_66456013_[1.0];\n      end;\n      else do ;\n      I_DEFAULT = _LEVELS_66456013_[2.0];\n      end;\n      end;\n      else do ;\n      _LINP_ = .;\n      P_DEFAULT1 = .;\n      P_DEFAULT0 = .;\n      I_DEFAULT = ' ';\n      end;\n      if \"P_DEFAULT1\" = . then \"P_DEFAULT1\" = 0.0789224953;\n      if \"P_DEFAULT0\" = . then \"P_DEFAULT0\" = 0.9210775047;\n      if MISSING(\"I_DEFAULT\") then do ;\n      _P_ = 0.0;\n      if \"P_DEFAULT1\" \u003e _P_ then do ;\n      _P_ = \"P_DEFAULT1\";\n      \"I_DEFAULT\" = '           1';\n      end;\n      if \"P_DEFAULT0\" \u003e _P_ then do ;\n      _P_ = \"P_DEFAULT0\";\n      \"I_DEFAULT\" = '           0';\n      end;\n      end;\n      EM_EVENTPROBABILITY = \"P_DEFAULT1\";\n      EM_CLASSIFICATION = \"I_DEFAULT\";\n      EM_PROBABILITY = MAX(\"P_DEFAULT1\", \"P_DEFAULT0\");\n\n   end;\n\n   method score(\n      double \"Delinquencies\",\n      IN_OUT char(12) \"EM_CLASSIFICATION\",\n      IN_OUT double \"EM_EVENTPROBABILITY\",\n      IN_OUT double \"EM_PROBABILITY\",\n      IN_OUT char(12) \"I_Default\",\n      IN_OUT double \"P_Default0\",\n      IN_OUT double \"P_Default1\"\n   );\n      this.\"Delinquencies\"= \"Delinquencies\";\n\n      _BXYN6YT3CYU4CE4WA5GTNNZ1Y();\n\n      \"EM_CLASSIFICATION\"= this.\"EM_CLASSIFICATION\";\n      \"EM_EVENTPROBABILITY\"= this.\"EM_EVENTPROBABILITY\";\n      \"EM_PROBABILITY\"= this.\"EM_PROBABILITY\";\n      \"I_Default\"= this.\"I_Default\";\n      \"P_Default0\"= this.\"P_Default0\";\n      \"P_Default1\"= this.\"P_Default1\";\n   end;\n\n   method predictedscore(\n      double \"Delinquencies\",\n      IN_OUT char(12) \"EM_CLASSIFICATION\",\n      IN_OUT double \"EM_EVENTPROBABILITY\",\n      IN_OUT double \"EM_PROBABILITY\",\n      IN_OUT char(12) \"I_Default\",\n      IN_OUT double \"P_Default0\",\n      IN_OUT double \"P_Default1\"\n   );\n      this.\"Delinquencies\"= \"Delinquencies\";\n\n      _BXYN6YT3CYU4CE4WA5GTNNZ1Y();\n\n      \"EM_CLASSIFICATION\"= this.\"EM_CLASSIFICATION\";\n      \"EM_EVENTPROBABILITY\"= this.\"EM_EVENTPROBABILITY\";\n      \"EM_PROBABILITY\"= this.\"EM_PROBABILITY\";\n      \"I_Default\"= this.\"I_Default\";\n      \"P_Default0\"= this.\"P_Default0\";\n      \"P_Default1\"= this.\"P_Default1\";\n   end;\n\n                                                                                     \n endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"Loanu32Appu32Ensemble_Pythonu32GradientBoostingu32u40Pipelineu321u41","description":"","source":"\n\nds2_options scond=none;\n                                                                                                       \n                                                                                                                                                                                                                                                                                                       \npackage \"Loanu32Appu32Ensemble_Pythonu32GradientBoostingu32u40Pipelineu321u41\" / overwrite=yes;\ndcl package pymas pm;\ndcl package logger logr('App.MM.Python.DS2');\ndcl varchar(32767) character set utf8 pypgm;\ndcl int resultCode revision;\n\nmethod score(double \"CredLineAge\",\ndouble \"CredLines\",\ndouble \"DebtIncRatio\",\ndouble \"Delinquencies\",\ndouble \"DerogatoryMarks\",\ndouble \"HomeValue\",\ndouble \"Income\",\ndouble \"Inquiries\",\nvarchar(100) \"JobType\",\ndouble \"LoanRequest\",\ndouble \"LoanToValue\",\ndouble \"YearsOnJob\",\nin_out double resultCode,\nin_out double \"P_Default0\",\nin_out double \"P_Default1\",\nin_out varchar(100) \"I_Default\");\n\n   resultCode = revision = 0;\n   if null(pm) then do;\n      pm = _new_ pymas();\n      resultCode = pm.useModule('model_exec_d3c73a73-3d19-4ea7-ab51-bb6d539088d1', 1);\n      if resultCode then do;\n         resultCode = pm.appendSrcLine('import sys');\n         resultCode = pm.appendSrcLine('sys.path.append(\"/modules/bded23e3-0744-4136-9f8b-205452133a61/\")');\n         resultCode = pm.appendSrcLine('import settings_bded23e3_0744_4136_9f8b_205452133a61');\n         resultCode = pm.appendSrcLine('settings_bded23e3_0744_4136_9f8b_205452133a61.pickle_path = \"/modules/bded23e3-0744-4136-9f8b-205452133a61/\"');\n         resultCode = pm.appendSrcLine('import _4eciaroqodklgq7s8o0p6y4r5_2059401d_5642_4bab_9b16_1a9acba3981b');\n         resultCode = pm.appendSrcLine('def score_method(Delinquencies, DerogatoryMarks, Inquiries, JobType, CredLineAge, CredLines, DebtIncRatio, LoanRequest, HomeValue, Income, LoanToValue, YearsOnJob):');\n         resultCode = pm.appendSrcLine('    \"Output: P_Default0, P_Default1, I_Default\"');\n         resultCode = pm.appendSrcLine('    return _4eciaroqodklgq7s8o0p6y4r5_2059401d_5642_4bab_9b16_1a9acba3981b.score_method(Delinquencies, DerogatoryMarks, Inquiries, JobType, CredLineAge, CredLines, DebtIncRatio, LoanRequest, HomeValue, Income, LoanToValue, YearsOnJob)');\n\n         revision = pm.publish(pm.getSource(), 'model_exec_d3c73a73-3d19-4ea7-ab51-bb6d539088d1');\n         if ( revision \u003c 1 ) then do;\n            logr.log( 'e', 'py.publish() failed.');\n            resultCode = -1;\n            return;\n         end;\n      end;\n   end;\n\n   resultCode = pm.useMethod('score_method');\n   if resultCode then do;\n      logr.log('E', 'useMethod() failed. resultCode=$s', resultCode);\n      return;\n   end;\n   resultCode = pm.setDouble('CredLineAge', CredLineAge);\n   if resultCode then\n      logr.log('E', 'setDouble for CredLineAge failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('CredLines', CredLines);\n   if resultCode then\n      logr.log('E', 'setDouble for CredLines failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('DebtIncRatio', DebtIncRatio);\n   if resultCode then\n      logr.log('E', 'setDouble for DebtIncRatio failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('Delinquencies', Delinquencies);\n   if resultCode then\n      logr.log('E', 'setDouble for Delinquencies failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('DerogatoryMarks', DerogatoryMarks);\n   if resultCode then\n      logr.log('E', 'setDouble for DerogatoryMarks failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('HomeValue', HomeValue);\n   if resultCode then\n      logr.log('E', 'setDouble for HomeValue failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('Income', Income);\n   if resultCode then\n      logr.log('E', 'setDouble for Income failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('Inquiries', Inquiries);\n   if resultCode then\n      logr.log('E', 'setDouble for Inquiries failed.  resultCode=$s', resultCode);\n   resultCode = pm.setString('JobType', JobType);\n   if resultCode then\n      logr.log('E', 'setString for JobType failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('LoanRequest', LoanRequest);\n   if resultCode then\n      logr.log('E', 'setDouble for LoanRequest failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('LoanToValue', LoanToValue);\n   if resultCode then\n      logr.log('E', 'setDouble for LoanToValue failed.  resultCode=$s', resultCode);\n   resultCode = pm.setDouble('YearsOnJob', YearsOnJob);\n   if resultCode then\n      logr.log('E', 'setDouble for YearsOnJob failed.  resultCode=$s', resultCode);\n   resultCode = pm.execute();\n   if (resultCode) then\n      logr.log('E', 'Error: pm.execute failed.  resultCode=$s', resultCode);\n   else do;\n      \"P_Default0\" = pm.getDouble('P_Default0');\n      \"P_Default1\" = pm.getDouble('P_Default1');\n      \"I_Default\" = pm.getString('I_Default');\n   end;\nend;\n\n                                                                                         \n endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"Loanu32Appu32Ensemble_highRiskModelScoreRule_1_0","description":"","source":"\n\nds2_options scond=WARNING;\n                                                                                           \n\nDS2_OPTIONS LOGICALEXPR = STANDARD;\nDS2_OPTIONS SCOND = WARNING;\n\n                                                                                                                                                                                                                                                                                                                    \n  package \"Loanu32Appu32Ensemble_highRiskModelScoreRule_1_0\"  / inline;\n\n      dcl package logger _logger('App.SASDCM');\n      dcl package logger logr_variableTrace('App.TableServices.DS2.Runtime.TraceVariables');\n\n                                                 \n            method setruleFiredBasePosition(integer newBasePosition); end;\n            method setDecisionNodeID(varchar newDecisonNodeID); end;\n            method enableRuleFiredRecording(); end;\n            method disableRuleFiredRecording(); end;\n            method initRuleFireHashes(); end;\n            method getRuleFiredFlagCount() returns integer;  return 0; end;\n            method recordRuleFired(\n              in_out char    ruleFiredFlags,\n              in_out integer rulesFiredForRecordCount,\n              char(36)       this_rule_id);\n            end;\n\n    method execute( in_out double \"P_Default1\",in_out varchar \"Status\");\n\n;\n         if (\"P_Default1\" \u003c .10) then do;\n         \"Status\" = 'Approved';\n\ngoto \"end_151630d5-be73-494c-8463-96f4edc5172c\";end;\n         else do;\n         \"Status\" = 'Declined';\n\n         end;\n\n         \"end_151630d5-be73-494c-8463-96f4edc5172c\":\n\n      rule_end:                                    \n    end;\n\n                                                                     \n   endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"Loanu32Appu32Ensemble_loanToValueRule_1_0","description":"","source":"\nds2_options scond=WARNING;\n                                                                                    \n\nDS2_OPTIONS LOGICALEXPR = STANDARD;\nDS2_OPTIONS SCOND = WARNING;\n\n                                                                                                                                                                                                                                                                                                      \n  package \"Loanu32Appu32Ensemble_loanToValueRule_1_0\"  / inline;\n\n      dcl package logger _logger('App.SASDCM');\n      dcl package logger logr_variableTrace('App.TableServices.DS2.Runtime.TraceVariables');\n\n                                                 \n            method setruleFiredBasePosition(integer newBasePosition); end;\n            method setDecisionNodeID(varchar newDecisonNodeID); end;\n            method enableRuleFiredRecording(); end;\n            method disableRuleFiredRecording(); end;\n            method initRuleFireHashes(); end;\n            method getRuleFiredFlagCount() returns integer;  return 0; end;\n            method recordRuleFired(\n              in_out char    ruleFiredFlags,\n              in_out integer rulesFiredForRecordCount,\n              char(36)       this_rule_id);\n            end;\n\n    method execute( in_out double \"CredLineAge\",in_out double \"CredLines\",in_out varchar \"CustomerID\",in_out double \"DebtIncRatio\",in_out double \"Default\",in_out double \"Delinquencies\",in_out double \"DerogatoryMarks\",in_out double \"HomeValue\",in_out double \"Income\",in_out double \"Inquiries\",in_out varchar \"JobType\",in_out double \"LoanRequest\",in_out double \"LoanToValue\",in_out varchar \"Status\",in_out double \"YearsOnJob\");\n\n;\n         if (\"LoanToValue\" \u003e= .80) then do;\n         \"Status\" = 'Declined';\n\n         end;\n\n         \"end_648c4f1c-a387-45cf-8ca8-1daa55043917\":\n\n      rule_end:                                    \n    end;\n\n                                                              \n   endpackage;","attributes":{"keyValue":""},"language":"DS2"},{"name":"Loanu32Appu32Ensemble_lowRiskModelScoreRule_1_0","description":"","source":"\nds2_options scond=WARNING;\n                                                                                          \n\nDS2_OPTIONS LOGICALEXPR = STANDARD;\nDS2_OPTIONS SCOND = WARNING;\n\n                                                                                                                                                                                                                                                                                                                  \n  package \"Loanu32Appu32Ensemble_lowRiskModelScoreRule_1_0\"  / inline;\n\n      dcl package logger _logger('App.SASDCM');\n      dcl package logger logr_variableTrace('App.TableServices.DS2.Runtime.TraceVariables');\n\n                                                 \n            method setruleFiredBasePosition(integer newBasePosition); end;\n            method setDecisionNodeID(varchar newDecisonNodeID); end;\n            method enableRuleFiredRecording(); end;\n            method disableRuleFiredRecording(); end;\n            method initRuleFireHashes(); end;\n            method getRuleFiredFlagCount() returns integer;  return 0; end;\n            method recordRuleFired(\n              in_out char    ruleFiredFlags,\n              in_out integer rulesFiredForRecordCount,\n              char(36)       this_rule_id);\n            end;\n\n    method execute( in_out double \"P_Default1\",in_out varchar \"Status\");\n\n;\n         if (\"P_Default1\" \u003c .3) then do;\n         \"Status\" = 'Approved';\n\ngoto \"end_32723d1e-71ec-438b-98bd-50253032e7c2\";end;\n         else do;\n         \"Status\" = 'Declined';\n\n         end;\n\n         \"end_32723d1e-71ec-438b-98bd-50253032e7c2\":\n\n      rule_end:                                    \n    end;\n\n                                                                    \n   endpackage;","attributes":{"keyValue":""},"language":"DS2"}]}